DROP TABLE IF EXISTS Admin;
DROP TABLE IF EXISTS HelpSeeker;
DROP TABLE IF EXISTS VolunteerOrganization;
DROP TABLE IF EXISTS Volunteer;
DROP TABLE IF EXISTS SystemUser;
DROP TABLE IF EXISTS PersonInNeed;
DROP TABLE IF EXISTS Events;
DROP TABLE IF EXISTS EventParticipants;

CREATE TABLE SystemUser (
    username TEXT PRIMARY KEY,
    password TEXT NOT NULL,
    email TEXT,
    phone TEXT,
    address TEXT
);

CREATE TABLE Volunteer (
    username TEXT PRIMARY KEY,
    fullName TEXT,
    FOREIGN KEY (username) REFERENCES SystemUser(username)
);

CREATE TABLE VolunteerOrganization (
    username TEXT PRIMARY KEY,
    organizationName TEXT,
    licenseNumber TEXT,
    FOREIGN KEY (username) REFERENCES SystemUser(username)
);

CREATE TABLE PersonInNeed (
    username TEXT PRIMARY KEY,
    fullName TEXT,
    FOREIGN KEY (username) REFERENCES SystemUser(username)
);

CREATE TABLE Admin (
    username TEXT PRIMARY KEY,
    password TEXT NOT NULL,
    email TEXT,
    phone TEXT,
    fullName TEXT
);

CREATE TABLE Events (
    eventId INTEGER PRIMARY KEY,
    title TEXT,
    maxParticipantNumber INTEGER,
    supportType VARCHAR(50),
    startDay INTEGER,
    startMonth INTEGER,
    startYear INTEGER,
    endDay INTEGER,
    endMonth INTEGER,
    endYear INTEGER,
    emergencyLevel VARCHAR(20),
    description TEXT,
    organizer TEXT,
    needer TEXT,
    FOREIGN KEY (organizer) REFERENCES VolunteerOrganization(username),
    FOREIGN KEY (needer) REFERENCES PersonInNeed(username)
);

CREATE TABLE EventParticipants (
    eventId INTEGER,
    username TEXT,
    PRIMARY KEY (eventId, username),
    FOREIGN KEY (eventId) REFERENCES Events(eventId),
    FOREIGN KEY (username) REFERENCES Volunteer(username)
);